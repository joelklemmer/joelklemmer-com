/* 20-layout: full-bleed layout engine, governed lanes, section rhythm, hero grid */
/* Layout contract: viewport-spanning root; lanes (full | wide | readable) govern inner content. RTL-safe. */
/* All layout uses logical properties (margin-inline, padding-inline, inset) for RTL safety. */

/* --------------------------------------------------------------------------- */
/* Breakpoints (mobile-first). No horizontal scroll; gutters scale; no clipping. */
/* mobile: 0–639px | tablet: 640px+ | desktop: 1024px+ | wide: 1280px+ | ultrawide: 1920px+ */
/* --------------------------------------------------------------------------- */
:root {
  --bp-mobile: 0;
  --bp-tablet: 640px;
  --bp-desktop: 1024px;
  --bp-wide: 1280px;
  --bp-ultrawide: 1920px;
}

/* --------------------------------------------------------------------------- */
/* Governed lane system (token-driven). Full = edge-to-edge; wide = large display; readable = line length */
/* --------------------------------------------------------------------------- */
:root {
  --lane-full: none;
  --lane-wide: var(--container-max-width);
  --lane-readable: var(--readable-max-width);
}

/* Layout root: full bleed, spans viewport; no fixed max-width wrapper.
   overflow-x: clip prevents horizontal scroll at all breakpoints (mobile→TV). */
.layout-root {
  width: 100%;
  min-width: 0;
  max-width: none;
  margin-inline: 0;
  overflow-x: clip;
}

/* Lane utilities: centered content with governed max-width; RTL-safe (logical properties only).
   Figma Make: --max-width via patch; --lane-wide/--container-max-width use it. */
.lane-full {
  width: 100%;
  max-width: none; /* full bleed: edge-to-edge; --lane-full is none */
  min-width: 0;
  margin-inline: auto;
  padding-inline: var(--gutter-inline-start) var(--gutter-inline-end);
}

.lane-wide {
  width: 100%;
  max-width: var(--lane-wide, var(--container-max-width));
  min-width: 0;
  margin-inline: auto;
  padding-inline: var(--gutter-inline-start) var(--gutter-inline-end);
}

.lane-readable {
  width: 100%;
  max-width: var(--lane-readable);
  min-width: 0;
  margin-inline: auto;
  padding-inline: var(--gutter-inline-start) var(--gutter-inline-end);
}

/* Legacy alias: optional boxed frame (not used as root) */
.calc-page-frame {
  width: 100%;
  max-width: var(--lane-wide);
  margin-inline: auto;
  padding-inline: var(--gutter-inline-start) var(--gutter-inline-end);
}

/* Page Frame: full-bleed; no max-width wrapper; section spacing and rhythm. Lane constraint per-section via Container. */
.page-frame {
  width: 100%;
  max-width: none;
  min-width: 0;
  margin-inline: 0;
  padding-inline: 0;
  display: grid;
  gap: var(--section-block-margin);
  grid-template-columns: 1fr;
  overflow-x: clip;
}

/* Full-bleed: section content wrapper; inner lane via Container. */
.full-bleed {
  width: 100%;
  max-width: none;
  min-width: 0;
}

/* --------------------------------------------------------------------------- */
/* Responsive gutter scale: mobile → tablet → desktop → TV.
   Figma spec: ~100–150px horizontal at desktop; no stretched content at any viewport. */
/* --------------------------------------------------------------------------- */
/* Base (320–639px): mobile — compact, touch-friendly */
:root {
  --container-padding-x: 1rem;
  --container-padding-x-wide: 1.25rem;
  --gutter-inline-start: calc(1rem + env(safe-area-inset-inline-start, 0px));
  --gutter-inline-end: calc(1rem + env(safe-area-inset-inline-end, 0px));
}

/* 640px+: large phone / small tablet */
@media (min-width: 640px) {
  :root {
    --container-padding-x: 1.5rem;
    --container-padding-x-wide: 1.75rem;
    --gutter-inline-start: calc(
      1.5rem + env(safe-area-inset-inline-start, 0px)
    );
    --gutter-inline-end: calc(1.5rem + env(safe-area-inset-inline-end, 0px));
  }
}

/* 768px+: tablet */
@media (min-width: 768px) {
  :root {
    --container-padding-x: 2rem;
    --container-padding-x-wide: 2.5rem;
    --gutter-inline-start: calc(2rem + env(safe-area-inset-inline-start, 0px));
    --gutter-inline-end: calc(2rem + env(safe-area-inset-inline-end, 0px));
  }
}

/* 1024px+: desktop */
@media (min-width: 1024px) {
  :root {
    --container-padding-x: 3rem;
    --container-padding-x-wide: 3.5rem;
    --gutter-inline-start: calc(3rem + env(safe-area-inset-inline-start, 0px));
    --gutter-inline-end: calc(3rem + env(safe-area-inset-inline-end, 0px));
  }
}

/* 1280px+: large desktop — Figma editorial: more breathing room (~100px horizontal) */
@media (min-width: 1280px) {
  :root {
    --container-padding-x: 5.5rem;
    --container-padding-x-wide: 6.25rem;
    --gutter-inline-start: calc(
      5.5rem + env(safe-area-inset-inline-start, 0px)
    );
    --gutter-inline-end: calc(5.5rem + env(safe-area-inset-inline-end, 0px));
  }
}

/* 1536px+: extra-large monitor */
@media (min-width: 1536px) {
  :root {
    --container-padding-x: 6rem;
    --container-padding-x-wide: 7rem;
    --gutter-inline-start: calc(6rem + env(safe-area-inset-inline-start, 0px));
    --gutter-inline-end: calc(6rem + env(safe-area-inset-inline-end, 0px));
  }
}

/* 1920px+: ultra-wide / TV — Figma ~150px */
@media (min-width: 1920px) {
  :root {
    --container-padding-x: 6.25rem;
    --container-padding-x-wide: 9.375rem;
    --gutter-inline-start: calc(
      6.25rem + env(safe-area-inset-inline-start, 0px)
    );
    --gutter-inline-end: calc(6.25rem + env(safe-area-inset-inline-end, 0px));
  }
}

/* --------------------------------------------------------------------------- */
/* Ultrawide: authority perception; no stretched paragraphs; balanced composition */
/* --------------------------------------------------------------------------- */
@media (min-width: 1600px) {
  .layout-root,
  .page-frame,
  .full-bleed,
  .section-shell,
  .content-lane-grid,
  .hero-authority,
  .hero-authority-inner {
    float: none;
  }

  /* Only .content-lane (readable-width lane) narrows; home uses Container (wide) and stays 1280px */
  .content-lane:not(.content-lane-grid),
  .lane-readable {
    max-width: var(--lane-readable);
    width: 100%;
  }

  /* Hero inherits width from parent Container; no extra constraint */
  .hero-authority-inner {
    width: 100%;
    max-width: none;
  }
}

/* Figma Make: flat stage; minimal top padding so hero starts near masthead.
   Merged into page-frame when contentStage=true (no redundant wrapper). */
.page-frame.page-frame-stage {
  background: var(--page-frame-stage-bg);
  border-radius: var(--page-frame-stage-radius);
  box-shadow: var(--page-frame-stage-elevation);
  padding-block-start: var(--space-3);
  padding-block-end: var(--space-6);
  padding-inline: 0;
  min-height: 0;
}

@media (min-width: 640px) {
  .page-frame.page-frame-stage {
    padding-block-start: var(--space-4);
    padding-block-end: var(--space-8);
  }
}

.section-shell {
  display: grid;
  gap: var(--section-inner-gap);
  min-width: 0;
}

.section-shell > * + * {
  margin-block-start: 0;
}

section.section-shell {
  margin-block-end: var(--section-block-margin);
}

section.section-shell:last-child {
  margin-block-end: 0;
}

/* Home page vertical rhythm: tighter spacing, reduced dead space */
.content-lane-grid {
  gap: var(--home-section-gap);
}

@media (min-width: 768px) {
  .content-lane-grid {
    gap: var(--home-section-gap-md);
  }
}

/* Home page section spacing: reduce dead space between sections */
.content-lane-grid > section.section-shell {
  margin-block-end: var(--home-section-gap);
}

@media (min-width: 768px) {
  .content-lane-grid > section.section-shell {
    margin-block-end: var(--home-section-gap-md);
  }
}

.content-lane-grid > section.section-shell:last-child {
  margin-block-end: 0;
}

.section-shell .content-lane {
  gap: var(--content-lane-gap);
}

.section-shell h2 {
  letter-spacing: var(--section-heading-letter-spacing);
  font-weight: var(--section-heading-weight);
  margin-block-end: var(--section-heading-margin-block-end);
}

.section-shell h2 + * {
  margin-block-start: var(--heading-to-content-gap);
}

/* Content lane: readable max-width governed by tokens; full-bleed surfaces unaffected */
.content-lane {
  width: 100%;
  max-width: var(--lane-readable);
  min-width: 0;
  margin-inline: auto;
  padding-inline: var(--gutter-inline-start) var(--gutter-inline-end);
}

/* Figma: home content band uses Container (wide) for lane+padding; aligns with masthead bar. */
.home-content-band {
  min-width: 0;
}

/* Grid of sections: full width; each section uses Container (lane) inside. */
.content-lane-grid {
  display: grid;
  grid-template-columns: 1fr;
  width: 100%;
  max-width: none;
  min-width: 0;
}

/* Figma: tighter header-to-hero spacing; overflow visible so text never clips */
.hero-authority {
  position: relative;
  margin-block-end: var(--section-block-margin);
  padding-block-start: var(--space-2);
  padding-block-end: var(--space-8);
  isolation: isolate;
  width: 100%;
  min-width: 0;
  max-width: 100%;
  overflow: visible;
}

@media (min-width: 768px) {
  .hero-authority {
    padding-block-start: var(--space-2);
    padding-block-end: var(--space-10);
  }
}

.hero-authority-atmosphere {
  position: absolute;
  inset: 0;
  background: var(--authority-ambient-soft);
  pointer-events: none;
  z-index: 0;
}

.hero-authority-atmosphere::before {
  content: '';
  position: absolute;
  inset: 0;
  background: var(--hero-atmosphere-primary);
  pointer-events: none;
}

.hero-authority-atmosphere::after {
  content: '';
  position: absolute;
  inset: 0;
  background: var(--hero-atmosphere-secondary);
  pointer-events: none;
}

/* Figma Make: no card wrapper. Hero inner is layout-only; page bg shows through. */
.hero-authority-inner {
  position: relative;
  z-index: 1;
  display: grid;
  gap: var(--hero-block-gap);
  width: 100%;
}

/* Figma: tighter plate padding for less boxed feel */
.hero-authority-plate {
  padding: var(--space-3);
  min-height: 0;
}

@media (min-width: 768px) {
  .hero-authority-plate {
    padding-block: var(--space-3);
    padding-inline: var(--space-4);
  }
}

@media (min-width: 1024px) {
  .hero-authority-plate {
    padding-block: var(--space-4);
    padding-inline: var(--space-5);
  }
}

.hero-authority-inner > * {
  position: relative;
  z-index: 1;
}

.hero-authority-stack,
.hero-authority-grid {
  display: grid;
  gap: var(--hero-block-gap);
  align-content: start;
}

.hero-authority-grid {
  grid-template-columns: 1fr;
  gap: var(--content-rhythm);
  align-items: start;
}

/* Figma: 2-col grid; tighter gap, image aligns with headline */
@media (min-width: 768px) {
  .hero-authority-grid {
    grid-template-columns: minmax(22rem, 1fr) minmax(0, 340px);
    align-items: start;
    align-content: start;
    gap: var(--space-8);
    min-width: 0;
  }
}

@media (min-width: 1024px) {
  .hero-authority-grid {
    grid-template-columns: minmax(32rem, 1fr) minmax(400px, 520px);
    gap: var(--space-8);
  }
}

/* Figma 1440px: image 520–600px, tighter column gap */
@media (min-width: 1280px) {
  .hero-authority-grid {
    grid-template-columns: minmax(36rem, 1fr) minmax(520px, 600px);
    gap: var(--space-8);
  }
}

/* Figma: headline uses full column width; lede constrained for readability. */
.hero-authority-content {
  display: grid;
  gap: var(--hero-block-gap);
  min-width: 0;
  align-content: start;
  width: 100%;
  overflow-wrap: break-word;
}

.hero-portrait-composition {
  width: 100%;
  max-width: 100%;
}

/* Figma Make: rectangular crop, light grey bg, no shadow (matches live Figma site) */
.hero-portrait-wrapper {
  width: 100%;
  position: relative;
  overflow: hidden;
  border-radius: 0;
  background: hsl(var(--color-neutral-100));
  box-shadow: none;
}

/* Portrait image wrapper handles aspect ratio from component */
.portrait-image-wrapper {
  width: 100%;
  position: relative;
  overflow: hidden;
  /* Height determined by aspect ratio set inline by component (4:5 = 0.8) */
  /* Aspect ratio enforced consistently across all breakpoints */
}

.portrait-image {
  display: block;
  width: 100%;
  height: 100%;
  /* Face-safe cropping: center top ensures head/face remains visible */
}

/* Mobile-first: portrait stacks above content; responsive text scaling */
@media (max-width: 767px) {
  .hero-authority-grid {
    grid-template-rows: auto auto;
    gap: var(--space-6);
  }

  .hero-portrait-composition {
    max-width: min(280px, 100%);
    margin-inline: auto;
    order: -1;
  }

  .hero-authority-content {
    order: 1;
  }
}

@media (max-width: 479px) {
  .hero-portrait-composition {
    max-width: min(240px, 100%);
  }

  .hero-authority-plate {
    padding-inline: var(--space-3);
  }
}

/* Tablet: portrait beside content, constrained sizing */
@media (min-width: 768px) {
  .hero-portrait-composition {
    max-width: 100%;
    width: 100%;
    /* Width constraint only - height follows aspect ratio (4:5) */
    /* No max-height to allow aspect ratio to control dimensions */
  }

  /* Tablet: ensure portrait stays in its column, never overlaps */
  .hero-authority-visual {
    min-width: 0;
    width: 100%;
    max-width: 100%;
  }
}

/* Portrait: Figma wide frame — fills column, no max-width constraint at desktop */
@media (min-width: 768px) {
  .hero-portrait-composition {
    max-width: 340px;
  }
}

@media (min-width: 1024px) {
  .hero-portrait-composition {
    max-width: 520px;
  }
}

@media (min-width: 1280px) {
  .hero-portrait-composition {
    max-width: 600px;
  }
}

/* Fluid hero title: Figma spec 60–80px at desktop, bold; clamp for mobile→TV. */
.hero-title {
  font-family: var(--font-serif, var(--hero-display-font));
  font-size: clamp(1.75rem, 4.5vw + 1.5rem, 5rem);
  line-height: var(--text-hero-line);
  letter-spacing: -0.01em;
  font-weight: 700;
  color: hsl(var(--color-text));
  margin: 0;
}

.hero-lede {
  font-family: var(--font-sans);
  font-size: var(--text-body-large);
  line-height: var(--text-body-large-line);
  color: hsl(var(--color-muted));
  margin: 0;
  max-width: min(42rem, 100%);
}

.hero-wrap {
  padding-block-start: var(--space-12);
  padding-block-end: var(--space-12);
}

/* Figma Make: rectangular crop */
.hero-photo {
  border-radius: 0;
  box-shadow: var(--hero-depth-shadow, var(--elevation-premium));
}

/* Legacy alias for hero display */
.hero-display {
  font-family: var(--hero-display-font);
  font-size: var(--hero-display-size);
  line-height: var(--hero-display-line);
  letter-spacing: var(--hero-display-spacing);
  font-weight: var(--hero-display-weight);
  color: hsl(var(--color-text));
  margin: 0;
}

/* Figma Make: generous padding, primary filled dark, secondary outline. */
.hero-actions {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: var(--space-4);
  margin-block-start: var(--space-8);
}

/* Figma Make: rectangular CTAs, serif, ample tap targets (55-figma-parity overrides padding) */
.hero-action-link {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: var(--space-3) var(--space-6);
  font-family: var(--font-serif);
  font-size: var(--text-body);
  font-weight: var(--font-weight-label);
  letter-spacing: var(--hero-cta-letter-spacing);
  border-radius: 0;
  transition:
    color var(--transition-duration-fast) var(--ease-authority),
    border-color var(--transition-duration-fast) var(--ease-authority),
    background-color var(--transition-duration-fast) var(--ease-authority);
}

.hero-action-primary {
  color: hsl(var(--color-text-on-accent));
  background: hsl(var(--color-accent));
  border: 1px solid transparent;
}

.hero-action-primary:hover {
  background: hsl(var(--color-accent-strong));
  border-color: transparent;
  color: hsl(var(--color-text-on-accent));
}

.hero-action-secondary {
  color: hsl(var(--color-accent));
  background: transparent;
  border: 1px solid hsl(var(--color-border));
}

.hero-action-secondary:hover {
  background: hsl(var(--color-hover-bg));
  border-color: hsl(var(--color-accent));
  color: hsl(var(--color-accent));
}

.hero-authority-visual {
  position: relative;
  min-height: 0;
  display: flex;
  align-items: start;
  justify-content: flex-end;
  /* Ensure visual column doesn't overflow */
  min-width: 0;
  width: 100%;
}

.hero-authority-visual-frame {
  position: relative;
  width: 100%;
  max-width: 100%;
  display: flex;
  align-items: start;
  justify-content: flex-end;
  /* Prevent overflow */
  min-width: 0;
}

@media (prefers-reduced-motion: reduce) {
  .hero-action-link {
    transition: none;
  }
}

.content-rhythm {
  gap: var(--content-rhythm);
}

.content-rhythm-tight {
  gap: var(--content-rhythm-tight);
}

.grid-cadence-column {
  column-gap: var(--column-cadence);
}

.grid-cadence-row {
  row-gap: var(--row-cadence);
}

.grid-cadence {
  column-gap: var(--column-cadence);
  row-gap: var(--row-cadence);
}

.optical-align-start {
  padding-inline-start: var(--optical-inset);
}

/* Masthead: Figma Make --nav-height 76px. Responsive icon size. */
:root {
  --masthead-bar-height: var(--nav-height, 76px);
  --masthead-touch-min: 44px;
  --tap-target-spacing: 24px; /* WCAG 2.2 2.5.8: ≥24px between adjacent tap targets */
  --masthead-icon-size: clamp(1rem, 2vw + 0.75rem, 1.25rem);
}

/* Figma Make: single horizontal row — logo | nav | utils never wrap (TV→IoT).
   Identity truncates; controls (hamburger+icons) always visible and never under wordmark. */
.masthead-bar {
  display: flex;
  flex-wrap: nowrap;
  align-items: center;
  gap: var(--masthead-bar-gap, 1rem);
  min-height: var(--masthead-bar-height);
  min-width: 0;
}
.masthead-outer {
  min-width: 0;
}

/* Masthead responsive nav: see 50-masthead-responsive.css (loads last). */

/* Figma site: wordmark — serif, uniform weight and size per https://pages-tile-41445691.figma.site/ */
.masthead-identity-link {
  font-family: var(--font-serif), 'Crimson Pro', Georgia, serif;
  font-size: clamp(0.875rem, 2vw + 0.75rem, var(--text-masthead));
  font-weight: var(--font-weight-medium, 500);
  line-height: var(--text-masthead-line);
  letter-spacing: -0.02em;
  color: inherit;
  white-space: nowrap;
  min-width: 0;
}

.masthead-wordmark-line1,
.masthead-wordmark-line2 {
  font-weight: inherit;
  font-size: inherit;
  color: inherit;
}

.masthead-touch-target {
  min-height: var(--masthead-touch-min);
}

.masthead-nav .masthead-touch-target,
.masthead-utilities .masthead-touch-target,
.masthead-utilities button[type='button'] {
  min-width: var(--masthead-touch-min);
  min-height: var(--masthead-touch-min);
}

/* Tap target spacing: ≥24px between adjacent controls (WCAG 2.2 2.5.8) */
.masthead-controls {
  min-width: 0;
}
.masthead-nav {
  min-width: 0;
}
.masthead-utilities,
.masthead-deferred-slot {
  gap: var(--masthead-bar-gap, 1rem);
}

/* Masthead icons: same size, stroke, and baseline alignment (no float) */
.masthead-icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

.masthead-icon svg {
  width: var(--masthead-icon-size);
  height: var(--masthead-icon-size);
  min-width: var(--masthead-icon-size);
  min-height: var(--masthead-icon-size);
  display: block;
  stroke-width: var(--masthead-icon-stroke);
}

/* Header: Fortune 10 / statesman briefing interface.
   Sticky with token-driven background. Scroll state set by MastheadScrollEffect.
   overflow: visible so focus rings on masthead controls are not clipped.
   Figma site: black masthead in light mode → light text (--masthead-bg from 00-tokens). */
header[aria-label] {
  position: sticky;
  top: 0;
  z-index: 40;
  background: var(--masthead-bg);
  border-bottom: 1px solid var(--masthead-border);
  overflow: visible;
  transition:
    background-color var(--transition-duration-normal) var(--ease-authority),
    box-shadow var(--transition-duration-normal) var(--ease-authority);
}

/* Figma: light mode masthead is light; use dark text and visible focus ring */
:root[data-theme='light'] header[aria-label] {
  --color-text: var(--masthead-text);
  --color-muted: var(--masthead-text-muted);
  --color-focus: var(--masthead-focus);
}

/* Dark mode masthead: surface bg, light text — scoped to header */
:root[data-theme='dark'] header[aria-label] {
  --color-text: var(--masthead-text);
  --color-muted: var(--masthead-text-muted);
  --color-focus: var(--masthead-focus);
}

@media (prefers-color-scheme: light) {
  :root:not([data-theme='dark']) header[aria-label] {
    --color-text: var(--masthead-text);
    --color-muted: var(--masthead-text-muted);
    --color-focus: var(--masthead-focus);
  }
}

@media (prefers-color-scheme: dark) {
  :root:not([data-theme='light']) header[aria-label] {
    --color-text: var(--masthead-text);
    --color-muted: var(--masthead-text-muted);
    --color-focus: var(--masthead-focus);
  }
}

/* Figma parity: solid masthead when scrolled (no transparency). */
[data-masthead-scrolled] header[aria-label] {
  background: var(--masthead-bg-scrolled);
  box-shadow: 0 1px 0 var(--masthead-border);
}

@media (prefers-reduced-motion: reduce) {
  header[aria-label],
  [data-masthead-scrolled] header[aria-label] {
    transition: none;
  }
}
