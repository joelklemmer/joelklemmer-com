/* 10-base: html/body defaults, typography primitives, focus, selection */
* {
  box-sizing: border-box;
}

html {
  font-family: var(--font-sans);
  line-height: var(--leading-normal);
  scroll-behavior: smooth;
  text-rendering: optimizeLegibility;
  font-optical-sizing: auto;
  overflow-x: clip;
}

body {
  margin: 0;
  width: 100%;
  min-width: 0;
  overflow-x: clip;
  background: var(--authority-atmosphere-subtle);
  color: hsl(var(--color-text));
  font-size: var(--body-analytical-size);
  font-weight: var(--font-weight-body);
  line-height: var(--body-analytical-line);
  letter-spacing: var(--body-analytical-spacing);
}

body::before {
  content: '';
  position: fixed;
  inset: 0;
  background: var(--authority-ambient-radial);
  pointer-events: none;
  z-index: 0;
}

body > * {
  position: relative;
  z-index: 1;
}

main.vacel-main {
  box-shadow: var(--authority-depth-illusion);
  min-width: 0; /* prevent overflow in full-bleed layout at narrow viewports */
}

html[dir='rtl'],
html[dir='rtl'] body {
  direction: rtl;
}

a {
  color: inherit;
  text-decoration: none;
}

/* Underline links toggle */
html[data-underline-links='true'] a:not([class*='no-underline']) {
  text-decoration: underline;
  text-underline-offset: 2px;
}

/* Typography hierarchy: weight and tracking baseline (institutional authority) */
h1 {
  font-weight: var(--display-heading-weight);
  letter-spacing: var(--display-heading-spacing);
  margin: 0;
}

h2 {
  font-weight: var(--section-heading-weight);
  letter-spacing: var(--section-heading-letter-spacing);
  margin: 0;
}

h3,
h4 {
  font-weight: var(--font-weight-section);
  letter-spacing: -0.015em;
  margin: 0;
}

p {
  margin: 0;
}

::selection {
  background: hsl(var(--color-accent) / 0.2);
}

:focus-visible {
  outline: var(--focus-ring-width, 2px) solid hsl(var(--color-focus));
  outline-offset: var(--focus-ring-offset, 2px);
  transition:
    outline-color var(--motion-duration-feedback) var(--motion-ease-out),
    outline-offset var(--motion-duration-feedback) var(--motion-ease-out);
}

/* Enhanced focus visibility in high contrast mode */
:root[data-contrast='high'] :focus-visible {
  outline-width: 3px;
  outline-offset: 3px;
  outline-style: solid;
}

@media (prefers-contrast: more) {
  :root:not([data-contrast]) :focus-visible {
    outline-width: 3px;
    outline-offset: 3px;
    outline-style: solid;
  }
}

@media (prefers-reduced-motion: reduce) {
  html {
    scroll-behavior: auto;
  }

  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }

  .hero-authority-inner {
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
  }
}

html[data-motion='reduced'] {
  scroll-behavior: auto;
}

html[data-motion='reduced'] *,
html[data-motion='reduced'] *::before,
html[data-motion='reduced'] *::after {
  animation-duration: 0.01ms !important;
  animation-iteration-count: 1 !important;
  transition-duration: 0.01ms !important;
  scroll-behavior: auto !important;
}

html[data-motion='reduced'] .hero-authority-inner {
  backdrop-filter: none;
  -webkit-backdrop-filter: none;
}

/* Reduced motion override (from AX panel) */
html.motion-reduce-force *,
html.motion-reduce-force *::before,
html.motion-reduce-force *::after {
  animation-duration: 0.01ms !important;
  animation-iteration-count: 1 !important;
  transition-duration: 0.01ms !important;
  scroll-behavior: auto !important;
}
